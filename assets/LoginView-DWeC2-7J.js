import{g as f,h as l,c as v,b as _,w as h,u as w,a as e,i as r,v as i,j as b,d,o as x,k as g}from"./index-D4FlFaz6.js";import{s as k}from"./vue3-loading-overlay-GXi_x3zt.js";import{S as c}from"./sweetalert2.all-YiQrZab4.js";const y={class:"container my-10"},V=e("h4",null,"載入中 請稍候...",-1),T={class:"col-md-3"},$=e("h1",{class:"h3 mb-3 fw-bold text-center"},"後台登入",-1),B={class:"mb-2"},N=e("label",{for:"username",class:"sr-only"},[e("span",{class:"text-danger"},"*"),d("帳號")],-1),S={class:"mb-2"},j=e("label",{for:"password",class:"sr-only"},[e("span",{class:"text-danger"},"*"),d("密碼")],-1),q=e("div",{class:"text-end"},[e("button",{class:"btn btn-lg btn-dark btn-block my-4",type:"submit"},"登入")],-1),U={__name:"LoginView",setup(C){const u=f(),a=l(!1),t=l({username:"",password:""});function p(){a.value=!0,console.log("login"),g.post("https://vue-course-api.hexschool.io/admin/signin",t.value).then(s=>{if(s.data.success){const{token:o,expired:n}=s.data;console.log(o,n),document.cookie=`TeaTalkToken=${o}; expired=${new Date(n)}`,console.log(s),u.push("/admin/products"),c.fire({icon:"success",title:"登入成功",showConfirmButton:!1,timer:2e3})}else c.fire({icon:"error",title:"登入失敗",text:"請重新登入!"})}),a.value=!1}return(m,s)=>(x(),v("div",y,[_(w(k),{active:a.value},{default:h(()=>[V]),_:1},8,["active"]),e("form",{class:"row justify-content-center",onSubmit:s[2]||(s[2]=b(o=>p(),["prevent"]))},[e("div",T,[$,e("div",B,[N,r(e("input",{type:"email",id:"username",class:"form-control",placeholder:"email",required:"",autofocus:"","onUpdate:modelValue":s[0]||(s[0]=o=>t.value.username=o)},null,512),[[i,t.value.username]])]),e("div",S,[j,r(e("input",{type:"password",id:"password",class:"form-control",placeholder:"Password",required:"","onUpdate:modelValue":s[1]||(s[1]=o=>t.value.password=o)},null,512),[[i,t.value.password]])]),q])],32)]))}};export{U as default};
